"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RunMilieuFs = void 0;
class RunMilieuFs {
    static safePrepare(callback) {
        let files;
        let dirs;
        try {
            callback(f => files = f, d => dirs = d);
            if (!files) {
                // noinspection ExceptionCaughtLocallyJS
                throw new Error("Files weren't set");
            }
            if (!dirs) {
                // noinspection ExceptionCaughtLocallyJS
                throw new Error("Dirs weren't set");
            }
            return new RunMilieuFs(files, dirs);
        }
        catch (err) {
            files && files.cleanUp();
            dirs && dirs.cleanUpFakeDirs();
            throw err;
        }
    }
    constructor(files, dirs) {
        this.files = files;
        this.dirs = dirs;
    }
    cleanUp() {
        this.files.cleanUp();
        this.dirs.cleanUpFakeDirs();
    }
}
exports.RunMilieuFs = RunMilieuFs;
//# sourceMappingURL=RunMilieuFs.js.map